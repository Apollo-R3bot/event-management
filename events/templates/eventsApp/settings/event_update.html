{% extends "eventsApp/settings/layout.html" %}

{% block title %}
Event
{% endblock %}

{% block account %}
<!-- <p class="lead">Event create / update</p> -->
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" aria-current="page" href="{% url 'update_event' event_id=event %}">Event Detail</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">Schedule</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'ticket_list' event_id=event %}">Tickets</a>
  </li>
</ul>
<form method="post" class="w-100" enctype="multipart/form-data">
  {% csrf_token %}
  <!-- Event Details -->
  <div class="card mb-2">
    <div class="card-header">Event Details {{ event }}</div>
    <div class="card-body row d-flex justify-content-around my-2">
      {{ event_form.as_p }}
    </div>
  </div>

  <!-- Schedule -->
  <div class="card mb-2">
    <div class="card-header">Schedule</div>
    <div class="card-body row g-2 my-2">
      <div class="col-sm-6">
        {{ schedule_form.start_date.label }}
        {{ schedule_form.start_date }}
      </div>
      <div class="col-sm-6">
        {{ schedule_form.start_time.label }}
        {{ schedule_form.start_time }}
      </div>
      <div class="col-sm-6">
        {{ schedule_form.end_date.label }}
        {{ schedule_form.end_date }}
      </div>
      <div class="col-sm-6">
        {{ schedule_form.end_time.label }}
        {{ schedule_form.end_time }}
      </div>
    </div>
  </div>

  <!-- Ticket -->
  <div class="card mb-2">
    <div class="card-header">Ticket</div>
    <div class="card-body my-0">
      <a href="" class="btn btn-outline-primary my-3" type="button" data-bs-toggle="modal" data-bs-target="#ticket">Add
        ticket</a>
      <table class="table table-hover table-striped">
        <thead>
          <tr>
            <td>Ticket name</td>
            <td>Price</td>
            <td>Qty</td>
            <td>Actions</td>
          </tr>
        </thead>
        <tbody>
          {% for t in ticket %}
          <tr>
            <td>{{ t.name }}</td>
            <td>{{ t.price }}</td>
            <td>{{ t.ticket_qty }}</td>
            <td>
              <a href="" class="btn btn-sm btn-outline-warning"><i class='bx bx-pencil text-warning me-1'></i>update</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

    </div>
  </div>


  <!-- Confirmation -->
  <div class="d-flex justify-content-start">
    <button class="btn btn-primary m-2" type="submit">Submit</button>
    <!-- <button class="btn btn-warning m-2" type="submit">Publish</button> -->
  </div>
</form>

<!-- Add ticket -->
<div class="modal fade" id="ticket" tabindex="-1" aria-labelledby="ticket" aria-hidden="true">
  <div class="modal-dialog">
    <form action="" method="post">
      {% csrf_token %}
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ticket">Add ticket</h5>
        </div>
        <div class="modal-body">
          {{ ticket_form.as_p }}
        </div>
        <div class="modal-footer d-flex justify-content-between py-1">
          <button type="submit" class="btn btn-primary btn-sm">Save</button>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}